import{c as e,n as l,t as a,u as t,e as n,r as o,d as r,a as i,b as s,i as u,I as c,w as d,g as p,s as g,f as m,h as f,j as v,m as b,k as h,l as k,o as y,p as C,F as S,q as V,v as x,x as w,y as B,z as M,A as z,B as P,C as I,D as E,E as T,G as A,H as D,J as q,K as L,L as $,M as j,N as W,O as F,P as H,Q as O,R as U,S as G,T as K,U as R,V as J}from"./index.7edbb798.js";import{u as N}from"./use-id.aa18ffa5.js";const[Q,X]=e("cell"),Y={icon:String,size:String,title:l,value:l,label:l,center:Boolean,isLink:Boolean,border:a,required:Boolean,iconPrefix:String,valueClass:t,labelClass:t,titleClass:t,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}};const Z=d(r({name:Q,props:n({},Y,o),setup(e,{slots:l}){const a=i(),t=()=>{if(l.label||u(e.label))return s("div",{class:[X("label"),e.labelClass]},[l.label?l.label():e.label])},n=()=>{if(l.title||u(e.title))return s("div",{class:[X("title"),e.titleClass],style:e.titleStyle},[l.title?l.title():s("span",null,[e.title]),t()])},o=()=>{const a=l.value||l.default;if(a||u(e.value)){const t=l.title||u(e.title);return s("div",{class:[X("value",{alone:!t}),e.valueClass]},[a?a():s("span",null,[e.value])])}},r=()=>{if(l["right-icon"])return l["right-icon"]();if(e.isLink){const l=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return s(c,{name:l,class:X("right-icon")},null)}};return()=>{var t,i;const{size:u,center:d,border:p,isLink:g,required:m}=e,f=null!=(t=e.clickable)?t:g,v={center:d,required:m,clickable:f,borderless:!p};return u&&(v[u]=!!u),s("div",{class:X(v),role:f?"button":void 0,tabindex:f?0:void 0,onClick:a},[l.icon?l.icon():e.icon?s(c,{name:e.icon,class:X("left-icon"),classPrefix:e.iconPrefix},null):void 0,n(),o(),r(),null==(i=l.extra)?void 0:i.call(l)])}}}));function _(e){return Array.isArray(e)?!e.length:0!==e&&!e}function ee(e,l){const{message:a}=l;return v(a)?a(e,l):a||""}function le({target:e}){e.composing=!0}function ae({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function te(e){return[...e].length}function ne(e,l){return[...e].slice(0,l).join("")}const[oe,re]=e("field");const ie=d(r({name:oe,props:n({},Y,{id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:l,formatter:Function,clearIcon:b("clear"),modelValue:h(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:b("focus"),formatTrigger:b("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},{rows:l,type:b("text"),rules:Array,autosize:[Boolean,Object],labelWidth:l,labelClass:t,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}}),emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:l,slots:a}){const t=N(),n=k({status:"unvalidated",focused:!1,validateMessage:""}),o=y(),r=y(),i=y(),{parent:d}=C(S),v=()=>{var l;return String(null!=(l=e.modelValue)?l:"")},b=l=>u(e[l])?e[l]:d&&u(d.props[l])?d.props[l]:void 0,h=V((()=>{const l=b("readonly");if(e.clearable&&!l){const l=""!==v(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&n.focused;return l&&a}return!1})),j=V((()=>i.value&&a.input?i.value():e.modelValue)),W=e=>e.reduce(((e,l)=>e.then((()=>{if("failed"===n.status)return;let{value:e}=j;if(l.formatter&&(e=l.formatter(e,l)),!function(e,l){if(_(e)){if(l.required)return!1;if(!1===l.validateEmpty)return!0}return!(l.pattern&&!l.pattern.test(String(e)))}(e,l))return n.status="failed",void(n.validateMessage=ee(e,l));if(l.validator){if(_(e)&&!1===l.validateEmpty)return;return function(e,l){return new Promise((a=>{const t=l.validator(e,l);f(t)?t.then(a):a(t)}))}(e,l).then((a=>{a&&"string"==typeof a?(n.status="failed",n.validateMessage=a):!1===a&&(n.status="failed",n.validateMessage=ee(e,l))}))}}))),Promise.resolve()),F=()=>{n.status="unvalidated",n.validateMessage=""},H=()=>l("end-validate",{status:n.status}),O=(a=e.rules)=>new Promise((t=>{F(),a?(l("start-validate"),W(a).then((()=>{"failed"===n.status?(t({name:e.name,message:n.validateMessage}),H()):(n.status="passed",t(),H())}))):t()})),U=l=>{if(d&&e.rules){const{validateTrigger:a}=d.props,t=E(a).includes(l),n=e.rules.filter((e=>e.trigger?E(e.trigger).includes(l):t));n.length&&O(n)}},G=(a,t="onChange")=>{const r=a;a=(l=>{var a;const{maxlength:t}=e;if(u(t)&&te(l)>t){const e=v();if(e&&te(e)===+t)return e;const r=null==(a=o.value)?void 0:a.selectionEnd;if(n.focused&&r){const e=[...l],a=e.length-+t;return e.splice(r-a,a),e.join("")}return ne(l,+t)}return l})(a);const i=te(r)-te(a);if("number"===e.type||"digit"===e.type){const l="number"===e.type;a=T(a,l,l)}let s=0;if(e.formatter&&t===e.formatTrigger){const{formatter:l,maxlength:t}=e;if(a=l(a),u(t)&&te(a)>t&&(a=ne(a,+t)),o.value&&n.focused){const{selectionEnd:e}=o.value,a=ne(r,e);s=te(l(a))-te(a)}}if(o.value&&o.value.value!==a)if(n.focused){let{selectionStart:e,selectionEnd:l}=o.value;if(o.value.value=a,u(e)&&u(l)){const t=te(a);i?(e-=i,l-=i):s&&(e+=s,l+=s),o.value.setSelectionRange(Math.min(e,t),Math.min(l,t))}}else o.value.value=a;a!==e.modelValue&&l("update:modelValue",a)},K=e=>{e.target.composing||G(e.target.value)},R=()=>{var e;return null==(e=o.value)?void 0:e.blur()},J=()=>{const l=o.value;"textarea"===e.type&&e.autosize&&l&&function(e,l){const a=p();e.style.height="auto";let t=e.scrollHeight;if(m(l)){const{maxHeight:e,minHeight:a}=l;void 0!==e&&(t=Math.min(t,e)),void 0!==a&&(t=Math.max(t,a))}t&&(e.style.height=`${t}px`,g(a))}(l,e.autosize)},Q=e=>{n.focused=!0,l("focus",e),z(J),b("readonly")&&R()},X=e=>{b("readonly")||(n.focused=!1,G(v(),"onBlur"),l("blur",e),U("onBlur"),z(J),$())},Y=e=>l("click-input",e),oe=e=>l("click-left-icon",e),ie=e=>l("click-right-icon",e),se=V((()=>"boolean"==typeof e.error?e.error:!(!d||!d.props.showError||"failed"!==n.status)||void 0)),ue=V((()=>{const e=b("labelWidth");if(e)return{width:x(e)}})),ce=a=>{if(13===a.keyCode){d&&d.props.submitOnEnter||"textarea"===e.type||A(a),"search"===e.type&&R()}l("keypress",a)},de=()=>e.id||`${t}-input`,pe=()=>{const l=re("control",[b("inputAlign"),{error:se.value,custom:!!a.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(a.input)return s("div",{class:l,onClick:Y},[a.input()]);const n={id:de(),ref:o,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:l,disabled:b("disabled"),readonly:b("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${t}-label`:void 0,onBlur:X,onFocus:Q,onInput:K,onClick:Y,onChange:ae,onKeypress:ce,onCompositionend:ae,onCompositionstart:le};return"textarea"===e.type?s("textarea",n,null):s("input",q("number"===(r=e.type)?{type:"text",inputmode:"decimal"}:"digit"===r?{type:"tel",inputmode:"numeric"}:{type:r},n),null);var r},ge=()=>{const l=a["right-icon"];if(e.rightIcon||l)return s("div",{class:re("right-icon"),onClick:ie},[l?l():s(c,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},me=()=>{if(e.showWordLimit&&e.maxlength){const l=te(v());return s("div",{class:re("word-limit")},[s("span",{class:re("word-num")},[l]),L("/"),e.maxlength])}},fe=()=>{if(d&&!1===d.props.showErrorMessage)return;const l=e.errorMessage||n.validateMessage;if(l){const e=a["error-message"],t=b("errorMessageAlign");return s("div",{class:re("error-message",t)},[e?e({message:l}):l])}},ve=()=>[s("div",{class:re("body")},[pe(),h.value&&s(c,{ref:r,name:e.clearIcon,class:re("clear")},null),ge(),a.button&&s("div",{class:re("button")},[a.button()])]),me(),fe()];return w({blur:R,focus:()=>{var e;return null==(e=o.value)?void 0:e.focus()},validate:O,formValue:j,resetValidation:F,getValidationStatus:()=>n.status}),B(D,{customValue:i,resetValidation:F,validateWithTrigger:U}),M((()=>e.modelValue),(()=>{G(v()),F(),U("onChange"),z(J)})),P((()=>{G(v(),e.formatTrigger),z(J)})),I("touchstart",(e=>{A(e),l("update:modelValue",""),l("clear",e)}),{target:V((()=>{var e;return null==(e=r.value)?void 0:e.$el}))}),()=>{const l=b("disabled"),n=b("labelAlign"),o=(()=>{const l=b("colon")?":":"";return a.label?[a.label(),l]:e.label?s("label",{id:`${t}-label`,for:de()},[e.label+l]):void 0})(),r=(()=>{const l=a["left-icon"];if(e.leftIcon||l)return s("div",{class:re("left-icon"),onClick:oe},[l?l():s(c,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return s(Z,{size:e.size,icon:e.leftIcon,class:re({error:se.value,disabled:l,[`label-${n}`]:n}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ue.value,valueClass:re("value"),titleClass:[re("label",[n,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:r?()=>r:null,title:o?()=>o:null,value:ve,extra:a.extra})}}})),[se,ue]=e("radio-group"),ce={disabled:Boolean,iconSize:l,direction:String,modelValue:t,checkedColor:String},de=Symbol(se);r({name:se,props:ce,emits:["change","update:modelValue"],setup(e,{emit:l,slots:a}){const{linkChildren:t}=j(de);return M((()=>e.modelValue),(e=>l("change",e))),t({props:e,updateValue:e=>l("update:modelValue",e)}),W((()=>e.modelValue)),()=>{var l;return s("div",{class:ue([e.direction]),role:"radiogroup"},[null==(l=a.default)?void 0:l.call(a)])}}});const pe={name:t,shape:b("round"),disabled:Boolean,iconSize:l,modelValue:t,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var ge=r({props:n({},pe,{bem:F(Function),role:String,parent:Object,checked:Boolean,bindGroup:a}),emits:["click","toggle"],setup(e,{emit:l,slots:a}){const t=y(),n=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},o=V((()=>n("disabled")||e.disabled)),r=V((()=>n("direction"))),i=V((()=>{const l=e.checkedColor||n("checkedColor");if(l&&e.checked&&!o.value)return{borderColor:l,backgroundColor:l}})),u=a=>{const{target:n}=a,r=t.value,i=r===n||(null==r?void 0:r.contains(n));o.value||!i&&e.labelDisabled||l("toggle"),l("click",a)},d=()=>{const{bem:l,shape:r,checked:u}=e,d=e.iconSize||n("iconSize");return s("div",{ref:t,class:l("icon",[r,{disabled:o.value,checked:u}]),style:{fontSize:x(d)}},[a.icon?a.icon({checked:u,disabled:o.value}):s(c,{name:"success",style:i.value},null)])},p=()=>{if(a.default)return s("span",{class:e.bem("label",[e.labelPosition,{disabled:o.value}])},[a.default()])};return()=>{const l="left"===e.labelPosition?[p(),d()]:[d(),p()];return s("div",{role:e.role,class:e.bem([{disabled:o.value,"label-disabled":e.labelDisabled},r.value]),tabindex:o.value?void 0:0,"aria-checked":e.checked,onClick:u},[l])}}});const[me,fe]=e("radio");const ve=d(r({name:me,props:pe,emits:["update:modelValue"],setup(e,{emit:l,slots:a}){const{parent:t}=C(de),n=()=>{t?t.updateValue(e.name):l("update:modelValue",e.name)};return()=>s(ge,q({bem:fe,role:"radio",parent:t,checked:(t?t.props.modelValue:e.modelValue)===e.name,onToggle:n},e),H(a,["default","icon"]))}}));const be=[{title:"用户协议",path:"/protocol"},{title:"隐私政策",path:"/private"},{title:"账号注销协议",path:"/cancellation"}],he=r({setup(){const e=K(),{login:l}=O(),a=k({username:"",password:"",check:!1}),t=async()=>{if(!a.username)return void R("请输入账号或手机号");if(!a.password)return void R("请输入密码");if(!a.check)return void R("请先同意下方协议");await l(a)&&R.success({message:"登录成功",duration:1e3,onClose:()=>{e.push("/")}})},n=()=>{J.alert({title:"找回密码",message:`请拨打${U.phone}客服热线`,confirmButtonColor:"#13C2C2",confirmButtonText:"知道了"})};return()=>s("div",{class:"login"},[s("img",{class:"backImage",src:"/faker-h5-vue3/assets/login.b993dfd7.png"},null),s("div",{class:"logo"},[s("img",{src:U.icon},null)]),s("div",{class:"content"},[s(ie,{placeholder:"请输入账号或手机号",modelValue:a.username,"onUpdate:modelValue":e=>{a.username=e}},null),s(ie,{placeholder:"请输入密码",type:"password",modelValue:a.password,clearable:!0,"onUpdate:modelValue":e=>{a.password=e}},null),s("div",{class:"button",onClick:t},[L("登 录")]),s("div",{class:"radio-line"},[s(ve,{name:!0,shape:"square",iconSize:16,modelValue:a.check,clearable:!0,"onUpdate:modelValue":e=>{a.check=!a.check}},null),s("div",null,[L("登录即表示您同意"),be.map((({title:l,path:a},t)=>s(G,{key:t},[s("span",{onClick:()=>{e.push({path:a})},class:"protocol-item"},[L("《"),l,L("》")]),t!==be.length-1?"、":""])))])]),s("p",{class:"find"},[s("span",{onClick:n},[L("找回密码")])])])])}});export{he as default};
