import{a6 as t,aa as e,a7 as o,ab as s,c as a,n as i,m as n,k as r,d as f,o as l,ac as d,l as c,q as u,$ as h,e as p,ad as v,z as m,C as x,b as g,ae as b,af as w,ag as $,w as y}from"./index.c1a17bf6.js";const[I,z]=a("sticky");const O=y(f({name:I,props:{zIndex:i,position:n("top"),container:Object,offsetTop:r(0),offsetBottom:r(0)},emits:["scroll","change"],setup(a,{emit:i,slots:n}){const r=l(),f=d(r),y=c({fixed:!1,width:0,height:0,transform:0}),I=u((()=>h("top"===a.position?a.offsetTop:a.offsetBottom))),O=u((()=>{const{fixed:t,height:e,width:o}=y;if(t)return{width:`${o}px`,height:`${e}px`}})),T=u((()=>{if(!y.fixed)return;const t=p(v(a.zIndex),{width:`${y.width}px`,height:`${y.height}px`,[a.position]:`${I.value}px`});return y.transform&&(t.transform=`translate3d(0, ${y.transform}px, 0)`),t})),j=()=>{if(!r.value||b(r))return;const{container:t,position:e}=a,o=w(r),s=$(window);if(y.width=o.width,y.height=o.height,"top"===e)if(t){const e=w(t),s=e.bottom-I.value-y.height;y.fixed=I.value>o.top&&e.bottom>0,y.transform=s<0?s:0}else y.fixed=I.value>o.top;else{const{clientHeight:e}=document.documentElement;if(t){const s=w(t),a=e-s.top-I.value-y.height;y.fixed=e-I.value<o.bottom&&e>s.top,y.transform=a<0?-a:0}else y.fixed=e-I.value<o.bottom}(t=>{i("scroll",{scrollTop:t,isFixed:y.fixed})})(s)};return m((()=>y.fixed),(t=>i("change",t))),x("scroll",j,{target:f,passive:!0}),function(a,i){if(!t||!window.IntersectionObserver)return;const n=new IntersectionObserver((t=>{i(t[0].intersectionRatio>0)}),{root:document.body}),r=()=>{a.value&&n.unobserve(a.value)};e(r),o(r),s((()=>{a.value&&n.observe(a.value)}))}(r,j),()=>{var t;return g("div",{ref:r,style:O.value},[g("div",{class:z({fixed:y.fixed}),style:T.value},[null==(t=n.default)?void 0:t.call(n)])])}}}));export{O as S};
